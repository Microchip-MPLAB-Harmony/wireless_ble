# BLE\_GAP\_SetExtAdvParams

**Parent topic:**[Functions](GUID-0DD261BF-40D6-42CD-8806-9B93D259D1CC.md)

## C

```c
uint16_t BLE_GAP_SetExtAdvParams(BLE_GAP_ExtAdvParams_T *p_extAdvParams, int8_t *p_selectedTxPower);
```

## Description

Configure the extended advertising parameters.

### Note

This API belongs to extended advertising feature. It will be disallowed if any one API belongs legacy advertising feature is issued before. **[Categories of advertising APIs and events](GUID-6250C306-2D62-4631-A4F9-616BBCCC48AC.md)** for details of advertising APIs.

**[BLE\_GAP\_AdvInit](GUID-00582C15-26DA-41D8-8125-1FDD13BCF632.md)** and **[BLE\_GAP\_ExtAdvInit](GUID-D2DBC15F-67D6-431E-9D69-DAE11D195641.md)** are required for this API.

Coding scheme is S=8 \(S: Transmitted Symbols\) in advertising PDU when coded phy is used. **[BLE\_GAP\_SetExtAdvCodingScheme](GUID-2E52589D-613E-4430-B22D-3B85B241189D.md)** is provided to change the coding scheme.<br />The API is suggested to call after BLE\_GAP\_SetExtAdvParams API.

If legacy advertising PDU types are being used, and the advertising set already<br />contains data, the type shall be one that supports advertising data and the<br />amount of data shall not exceed 31 bytes.

If extended advertising PDU types are being used then:

-   The advertisement shall not be both connectable and scannable.

-   High duty cycle directed connectable advertising shall not be used \(bit 3 = 0\).


This API only accepts 2 configurations from 2nd advertising set:

1.  Event property is non-connectable and non-scannable: This advertising set will use Non-RPA automatically and change periodically. Default address timeout is 15 minutes if application never set local privacy by **[BLE\_GAP\_SetLocalPrivacy](GUID-2AB06D4A-477E-447D-A34F-D254F75AA3A3.md)**.

2.  Event property is connectable or scannable: peer address must in resolving list and local privacy must be enabled. This peer address should not use the same IRK with other advertising set. This advertising set will use RPA.<br />It is recommened to clear and re-configure all advertising sets after calling **[BLE\_GAP\_SetLocalPrivacy](GUID-2AB06D4A-477E-447D-A34F-D254F75AA3A3.md)** or **[BLE\_GAP\_SetResolvingList](GUID-A4BB35F0-FF5A-42A5-8846-772BE5ACCD50.md)**.


## Parameters

|Parameter|Description|
|---------|-----------|
|\[in\] p\_extAdvParams|Pointer to **[BLE\_GAP\_ExtAdvParams\_T](GUID-0C5017F4-1910-4115-B45B-B55FCAE0835D.md)** structure buffer.|
|\[out\] p\_selectedTxPower|Point to the real transmit power level. \(Unit: dBm\)|

## Return values

|Return value|Description|
|------------|-----------|
|MBA\_RES\_SUCCESS|Successfully configure the extended advertising parameters.|
|MBA\_RES\_OOM|Internal memory allocation failure.|
|MBA\_RES\_INVALID\_PARA|Invalid parameters.|
|MBA\_RES\_COMMAND\_DISALLOWED|Command disallowed.|

